CREATE TABLE tb_cliente (
	id_cliente BIGSERIAL PRIMARY KEY,
	tipo_cliente VARCHAR(45) NOT NULL,
	senha VARCHAR(45) NOT NULL,
	nome VARCHAR(45) NOT NULL,
	descricao VARCHAR(255),
	website VARCHAR(45),
	logo_image VARCHAR(255),
	uri_redirecionamento VARCHAR(100),
	ativo BOOLEAN NOT NULL DEFAULT FALSE
);

CREATE TABLE tb_usuario (
	id_usuario BIGSERIAL PRIMARY KEY,
	uid_facebook BIGINT,
	email VARCHAR(45) UNIQUE NOT NULL,
	senha VARCHAR(45) NOT NULL,
	nome VARCHAR(100) NOT NULL,
	celular VARCHAR(15) NOT NULL,
	ativo BOOLEAN NOT NULL DEFAULT TRUE
);

CREATE TABLE tb_token (
	id_token BIGSERIAL PRIMARY KEY,
	id_cliente BIGINT NOT NULL REFERENCES tb_cliente (id_cliente) ON UPDATE CASCADE ON DELETE RESTRICT,
	id_usuario BIGINT NOT NULL REFERENCES tb_usuario (id_usuario) ON UPDATE CASCADE ON DELETE RESTRICT,
	token_acesso VARCHAR(45) NOT NULL UNIQUE,
	token_atualizacao VARCHAR(45) NOT NULL UNIQUE,
	tipo_token VARCHAR(45) NOT NULL,
	data_cadastro TIMESTAMP WITHOUT TIME ZONE NOT NULL DEFAULT NOW(),
	expira_em INT NOT NULL DEFAULT 3600
);

CREATE TABLE tb_cartao_credito (
	id_cartao_credito BIGSERIAL PRIMARY KEY,
	id_usuario BIGINT NOT NULL REFERENCES tb_usuario (id_usuario) ON UPDATE CASCADE ON DELETE RESTRICT,
	numero_cartao VARCHAR(45) NOT NULL,
	nome_titular VARCHAR(45) NOT NULL,
	mes_validade VARCHAR(2) NOT NULL,
	ano_validade VARCHAR(4) NOT NULL,
	codigo_seguranca VARCHAR(4) NOT NULL,
	cpf_titutar VARCHAR(11) NOT NULL,
	telefone_titular VARCHAR(15) NOT NULL,
	ativo BOOLEAN NOT NULL DEFAULT TRUE,
	liberado BOOLEAN NOT NULL DEFAULT FALSE
);

CREATE TABLE tb_carro (
	id_carro BIGSERIAL PRIMARY KEY,
	id_usuario BIGINT NOT NULL REFERENCES tb_usuario (id_usuario) ON UPDATE CASCADE ON DELETE RESTRICT,
	numero_chassi VARCHAR(45) UNIQUE NOT NULL,
	cpf_proprietario VARCHAR(11) NOT NULL,
	marca VARCHAR(45) NOT NULL,
	modelo VARCHAR(45) NOT NULL,
	ano VARCHAR(4) NOT NULL,
	placa VARCHAR(45) NOT NULL,
	quantidade_passageiros INT NOT NULL DEFAULT 4,
	quantidade_portas INT NOT NULL DEFAULT 2,
	cor VARCHAR(45) NOT NULL,
	wifi BOOLEAN NOT NULL DEFAULT FALSE,
	ar_condicionado BOOLEAN NOT NULL DEFAULT FALSE,
	som BOOLEAN NOT NULL DEFAULT FALSE,
	dvd BOOLEAN NOT NULL DEFAULT FALSE,
	airbag BOOLEAN NOT NULL DEFAULT FALSE,
	ativo BOOLEAN NOT NULL DEFAULT FALSE,
	liberado BOOLEAN NOT NULL DEFAULT FALSE
);
